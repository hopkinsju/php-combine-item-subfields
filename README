Given a marc file containing all shelving locations for all branches, and a software that is not capable of analyzing the item records and doing this work on import, we script a solution.

Take a MARC file, concatenate the branch code onto the shelving location, and add to a new subfield.

Usage: 'php combine-item-subfields.php --item-tag=999 --input-file=input.mrc --output-file=output.mrc --logfile=report.log'
